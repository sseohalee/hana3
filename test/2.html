<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            width:700px;
        }

        table, th, td {
            border: solid 1px black;
            border-collapse : collapse;
        }

        td{
            text-align: right;
        }

        .name{
            text-align: left;
        }
    </style>
</head>
<body>
    <table id="salaryTable">
        <thead>
            <tr>
                <th>번호</th>
                <th>이름</th>
                <th>근무시간</th>
                <th>시간당급여액</th>
                <th>기본액</th>
                <th>초과수당</th>
                <th>합계</th>
                <th>세액</th>
                <th>실지불액</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    

    <script>
        window.onload=function(){
            const obj = {
                base_time: 20,
                list: [
                    { id: 1, username: "홍길동", work_time: 40, per_pay: 10000 },
                    { id: 2, username: "송민헌", work_time: 20, per_pay: 20000 },
                    { id: 3, username: "장길산", work_time: 30, per_pay: 30000 },
                    { id: 4, username: "임꺽정", work_time: 10, per_pay: 40000 },
                    { id: 5, username: "강민구", work_time: 30, per_pay: 10000 },
                ]
            };
            let exceedPercent = 0.5; // 초과수당
            let taxPercent = 0.033;
            var totalPay=0;

            var table=document.getElementById('salaryTable');
            var div=document.createElement('div');
            
            obj.list.forEach(user=>{
                const row = table.insertRow();
                for (const[k,v] of Object.entries(user)){
                    const cell=row.insertCell();
                    if(k==='username') cell.style.textAlign = "left";;
                    cell.innerText=v.toLocaleString();
                }

                //기본액
                var pay=user['work_time']*user['per_pay'];
                row.insertCell().innerText=pay.toLocaleString();

                //초과수당
                var exceed=0;
                if(user['work_time']>obj.base_time){
                    let exceedTime=user['work_time']-obj.base_time;
                    exceed=user['per_pay']*exceedTime*exceedPercent;
                }
                row.insertCell().innerText=exceed.toLocaleString();

                //합계
                var sum=pay+exceed;
                row.insertCell().innerText=sum.toLocaleString();

                //세액
                var tax=sum*taxPercent;
                row.insertCell().innerText=tax.toLocaleString();
                
                //실지불액
                var actualPay=sum-tax;
                totalPay+=actualPay;
                row.insertCell().innerText=actualPay.toLocaleString();
            });

            //총지불액
            const row = table.insertRow();
            const cell=row.insertCell();
            cell.colSpan="7";
            row.insertCell().innerText='총지불액';
            row.insertCell().innerText=totalPay.toLocaleString();

        }


    </script>
</body>
</html>